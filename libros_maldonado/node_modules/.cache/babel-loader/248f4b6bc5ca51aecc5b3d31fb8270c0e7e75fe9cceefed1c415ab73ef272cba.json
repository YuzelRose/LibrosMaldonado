{"ast":null,"code":"export const generateXML = () => {\n  return `\n    <UserSession>\n        <Cart>\n        </Cart>\n        <FavList>\n        </FavList>\n    </UserSession>`;\n};\nexport const addToCart = item => {\n  const userSessionXML = localStorage.getItem('UserSession');\n  const parser = new DOMParser();\n  const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\n  const newCartItem = xmlDoc.createElement(\"Item\");\n  newCartItem.setAttribute(\"Id\", item);\n  const itemIdElement = xmlDoc.createElement(\"ID\");\n  itemIdElement.textContent = item;\n  const quantityElement = xmlDoc.createElement(\"Cantidad\");\n  quantityElement.textContent = 1;\n  newCartItem.appendChild(itemIdElement);\n  newCartItem.appendChild(quantityElement);\n  const cartElement = xmlDoc.getElementsByTagName(\"Cart\")[0];\n  cartElement.appendChild(newCartItem);\n  const serializer = new XMLSerializer();\n  const updatedXML = serializer.serializeToString(xmlDoc);\n  localStorage.setItem('UserSession', updatedXML);\n  alert('Artículo agregado al carrito con éxito.');\n};\nexport const addToFavorites = item => {\n  const userSessionXML = localStorage.getItem('UserSession');\n  const parser = new DOMParser();\n  const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\n  const newFavItem = xmlDoc.createElement(\"Item\");\n  const itemIdElement = xmlDoc.createElement(\"ID\");\n  itemIdElement.textContent = item;\n  newFavItem.appendChild(itemIdElement);\n  const favListElement = xmlDoc.getElementsByTagName(\"FavList\")[0];\n  favListElement.appendChild(newFavItem);\n\n  // Serializar el XML actualizado\n  const serializer = new XMLSerializer();\n  const updatedXML = serializer.serializeToString(xmlDoc);\n\n  // Guardar el XML actualizado en localStorage\n  localStorage.setItem('UserSession', updatedXML);\n  alert('Artículo agregado a favoritos con éxito.');\n};\nexport const removeFromCart = itemId => {\n  const userSessionXML = localStorage.getItem('UserSession');\n  if (userSessionXML) {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(userSessionXML, 'text/xml');\n    const cartElement = xmlDoc.getElementsByTagName('Cart')[0];\n    if (cartElement) {\n      const items = cartElement.getElementsByTagName('Item');\n      for (let i = 0; i < items.length; i++) {\n        const idElement = items[i].getElementsByTagName('ID')[0];\n        if (idElement && idElement.textContent === String(itemId)) {\n          cartElement.removeChild(items[i]);\n          break;\n        }\n      }\n      const serializer = new XMLSerializer();\n      const updatedXML = serializer.serializeToString(xmlDoc);\n      localStorage.setItem('UserSession', updatedXML);\n    }\n  }\n};\nexport const removeFromFavorites = itemId => {\n  const userSessionXML = localStorage.getItem('userSession');\n  if (userSessionXML) {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(userSessionXML, 'text/xml');\n    const FavListElement = xmlDoc.getElementsByTagName('FavList')[0];\n    if (FavListElement) {\n      const items = FavListElement.getElementsByTagName('Item');\n      for (let i = 0; i < items.length; i++) {\n        const idElement = items[i].getElementsByTagName('ID')[0];\n        if (idElement && idElement.textContent === String(itemId)) {\n          FavListElement.removeChild(items[i]);\n          break;\n        }\n      }\n      const serializer = new XMLSerializer();\n      const updatedXML = serializer.serializeToString(xmlDoc);\n      localStorage.setItem('UserSession', updatedXML);\n    }\n  }\n};\nexport const isCreated = () => {\n  const userSessionXML = localStorage.getItem('UserSession');\n  return !!userSessionXML;\n};\nexport const eliminateXML = setUSer => {\n  setUSer([]);\n  localStorage.removeItem('UserSession');\n  alert('Sesión cerrada.');\n};\nexport const saveAndPay = () => {\n  const userSessionXML = localStorage.getItem('UserSession');\n  if (!userSessionXML) {\n    alert('No hay XML para descargar.');\n    return;\n  }\n  const blob = new Blob([userSessionXML], {\n    type: 'application/xml'\n  });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = 'UserSession.xml';\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n};","map":{"version":3,"names":["generateXML","addToCart","item","userSessionXML","localStorage","getItem","parser","DOMParser","xmlDoc","parseFromString","newCartItem","createElement","setAttribute","itemIdElement","textContent","quantityElement","appendChild","cartElement","getElementsByTagName","serializer","XMLSerializer","updatedXML","serializeToString","setItem","alert","addToFavorites","newFavItem","favListElement","removeFromCart","itemId","items","i","length","idElement","String","removeChild","removeFromFavorites","FavListElement","isCreated","eliminateXML","setUSer","removeItem","saveAndPay","blob","Blob","type","url","URL","createObjectURL","a","document","href","download","body","click","revokeObjectURL"],"sources":["C:/Users/User/OneDrive/Documentos/.Trabajo/MERN LIBMAL/libros_maldonado/src/backend/utils/XMLUtils.js"],"sourcesContent":["export const generateXML = () => {\r\n    return `\r\n    <UserSession>\r\n        <Cart>\r\n        </Cart>\r\n        <FavList>\r\n        </FavList>\r\n    </UserSession>`;\r\n}\r\n\r\nexport const addToCart = (item) => { \r\n    const userSessionXML = localStorage.getItem('UserSession');\r\n    const parser = new DOMParser();\r\n    const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\r\n    \r\n    const newCartItem = xmlDoc.createElement(\"Item\");\r\n    newCartItem.setAttribute(\"Id\", item); \r\n    const itemIdElement = xmlDoc.createElement(\"ID\");\r\n    itemIdElement.textContent = item; \r\n    const quantityElement = xmlDoc.createElement(\"Cantidad\");\r\n    quantityElement.textContent = 1; \r\n    \r\n    newCartItem.appendChild(itemIdElement);\r\n    newCartItem.appendChild(quantityElement);\r\n\r\n    const cartElement = xmlDoc.getElementsByTagName(\"Cart\")[0];\r\n    cartElement.appendChild(newCartItem);\r\n\r\n    const serializer = new XMLSerializer();\r\n    const updatedXML = serializer.serializeToString(xmlDoc);\r\n    localStorage.setItem('UserSession', updatedXML);\r\n    alert('Artículo agregado al carrito con éxito.');\r\n}\r\n\r\nexport const addToFavorites = (item) => {\r\n    const userSessionXML = localStorage.getItem('UserSession');\r\n    const parser = new DOMParser();\r\n    const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\r\n\r\n    const newFavItem = xmlDoc.createElement(\"Item\");\r\n    const itemIdElement = xmlDoc.createElement(\"ID\");\r\n    itemIdElement.textContent = item;\r\n    newFavItem.appendChild(itemIdElement);\r\n\r\n    const favListElement = xmlDoc.getElementsByTagName(\"FavList\")[0];\r\n    favListElement.appendChild(newFavItem);\r\n\r\n    // Serializar el XML actualizado\r\n    const serializer = new XMLSerializer();\r\n    const updatedXML = serializer.serializeToString(xmlDoc);\r\n\r\n    // Guardar el XML actualizado en localStorage\r\n    localStorage.setItem('UserSession', updatedXML);\r\n    alert('Artículo agregado a favoritos con éxito.');\r\n};\r\n\r\n\r\nexport const removeFromCart = (itemId) => {\r\n    const userSessionXML = localStorage.getItem('UserSession');\r\n    if (userSessionXML) {\r\n        const parser = new DOMParser();\r\n        const xmlDoc = parser.parseFromString(userSessionXML, 'text/xml');\r\n        const cartElement = xmlDoc.getElementsByTagName('Cart')[0];\r\n        if (cartElement) {\r\n            const items = cartElement.getElementsByTagName('Item');\r\n            for (let i = 0; i < items.length; i++) {\r\n                const idElement = items[i].getElementsByTagName('ID')[0];\r\n                if (idElement && idElement.textContent === String(itemId)) {\r\n                    cartElement.removeChild(items[i]);\r\n                    break;\r\n                }\r\n            }\r\n            const serializer = new XMLSerializer();\r\n            const updatedXML = serializer.serializeToString(xmlDoc);\r\n            localStorage.setItem('UserSession', updatedXML);\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeFromFavorites = (itemId) => {\r\n    const userSessionXML = localStorage.getItem('userSession');\r\n    if (userSessionXML) {\r\n        const parser = new DOMParser();\r\n        const xmlDoc = parser.parseFromString(userSessionXML, 'text/xml');\r\n        const FavListElement = xmlDoc.getElementsByTagName('FavList')[0];\r\n        if (FavListElement) {\r\n            const items = FavListElement.getElementsByTagName('Item');\r\n            for (let i = 0; i < items.length; i++) {\r\n                const idElement = items[i].getElementsByTagName('ID')[0];\r\n                if (idElement && idElement.textContent === String(itemId)) {\r\n                    FavListElement.removeChild(items[i]);\r\n                    break;\r\n                }\r\n            }\r\n            const serializer = new XMLSerializer();\r\n            const updatedXML = serializer.serializeToString(xmlDoc);\r\n            localStorage.setItem('UserSession', updatedXML);\r\n        }\r\n    }\r\n}\r\n\r\nexport const isCreated = () => {\r\n    const userSessionXML = localStorage.getItem('UserSession');\r\n    return !!userSessionXML; \r\n}\r\n\r\nexport const eliminateXML = (setUSer) => {\r\n    setUSer([])\r\n    localStorage.removeItem('UserSession');\r\n    alert('Sesión cerrada.');\r\n}\r\n\r\nexport const saveAndPay = () => {\r\n    const userSessionXML = localStorage.getItem('UserSession');\r\n\r\n    if (!userSessionXML) {\r\n        alert('No hay XML para descargar.');\r\n        return;\r\n    }\r\n    const blob = new Blob([userSessionXML], { type: 'application/xml' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'UserSession.xml'; \r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}