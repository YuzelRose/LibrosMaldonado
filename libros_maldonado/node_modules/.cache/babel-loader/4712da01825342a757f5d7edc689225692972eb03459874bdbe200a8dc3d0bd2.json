{"ast":null,"code":"export const generateXML = mail => {\n  return `\n    <UserSession>\n        <User>\n            <Email>${mail}</Email>\n        </User>\n        <Cart>\n        </Cart>\n        <FavList>\n        </FavList>\n    </UserSession>`;\n};\nexport const addToCart = item => {\n  const userSessionXML = localStorage.getItem('userSession');\n  const parser = new DOMParser();\n  const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\n  const newCartItem = xmlDoc.createElement(\"Item\");\n  newCartItem.setAttribute(\"Id\", item);\n  const itemIdElement = xmlDoc.createElement(\"ID\");\n  itemIdElement.textContent = item;\n  const quantityElement = xmlDoc.createElement(\"Cantidad\");\n  quantityElement.textContent = 1;\n  newCartItem.appendChild(itemIdElement);\n  newCartItem.appendChild(quantityElement);\n  const cartElement = xmlDoc.getElementsByTagName(\"Cart\")[0];\n  cartElement.appendChild(newCartItem);\n  const serializer = new XMLSerializer();\n  const updatedXML = serializer.serializeToString(xmlDoc);\n  localStorage.setItem('userSession', updatedXML);\n  alert('Artículo agregado al carrito con éxito.');\n  console.log(localStorage.getItem('userSession'));\n};\nexport const removeFromCart = itemId => {\n  const userSessionXML = localStorage.getItem('userSession');\n  if (userSessionXML) {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(userSessionXML, 'text/xml');\n    const cartElement = xmlDoc.getElementsByTagName('Cart')[0];\n    if (cartElement) {\n      const items = cartElement.getElementsByTagName('Item');\n      for (let i = 0; i < items.length; i++) {\n        const idElement = items[i].getElementsByTagName('ID')[0];\n        if (idElement && idElement.textContent === String(itemId)) {\n          cartElement.removeChild(items[i]);\n          break;\n        }\n      }\n      const serializer = new XMLSerializer();\n      const updatedXML = serializer.serializeToString(xmlDoc);\n      localStorage.setItem('userSession', updatedXML);\n    }\n  }\n};\nexport const isCreated = () => {\n  const userSessionXML = localStorage.getItem('userSession');\n  return !!userSessionXML;\n};\nexport const getUser = () => {\n  const userSessionXML = localStorage.getItem('userSession');\n  if (userSessionXML) {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\n    const userElement = xmlDoc.getElementsByTagName(\"User\")[0];\n    if (userElement) {\n      const userEmail = userElement.getElementsByTagName(\"Email\")[0].textContent;\n      return userEmail;\n    }\n  } else {\n    return null;\n  }\n};\nexport const eliminateXML = () => {\n  localStorage.removeItem('userSession');\n  alert('Sesión cerrada.');\n};","map":{"version":3,"names":["generateXML","mail","addToCart","item","userSessionXML","localStorage","getItem","parser","DOMParser","xmlDoc","parseFromString","newCartItem","createElement","setAttribute","itemIdElement","textContent","quantityElement","appendChild","cartElement","getElementsByTagName","serializer","XMLSerializer","updatedXML","serializeToString","setItem","alert","console","log","removeFromCart","itemId","items","i","length","idElement","String","removeChild","isCreated","getUser","userElement","userEmail","eliminateXML","removeItem"],"sources":["C:/Users/User/OneDrive/Documentos/.Trabajo/MERN LIBMAL/libros_maldonado/src/backend/utils/XMLUtils.js"],"sourcesContent":["export const generateXML = (mail) => {\r\n    return `\r\n    <UserSession>\r\n        <User>\r\n            <Email>${mail}</Email>\r\n        </User>\r\n        <Cart>\r\n        </Cart>\r\n        <FavList>\r\n        </FavList>\r\n    </UserSession>`;\r\n}\r\n\r\nexport const addToCart = (item) => { \r\n    const userSessionXML = localStorage.getItem('userSession');\r\n    const parser = new DOMParser();\r\n    const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\r\n    \r\n    const newCartItem = xmlDoc.createElement(\"Item\");\r\n    newCartItem.setAttribute(\"Id\", item); \r\n    const itemIdElement = xmlDoc.createElement(\"ID\");\r\n    itemIdElement.textContent = item; \r\n    const quantityElement = xmlDoc.createElement(\"Cantidad\");\r\n    quantityElement.textContent = 1; \r\n    \r\n    newCartItem.appendChild(itemIdElement);\r\n    newCartItem.appendChild(quantityElement);\r\n\r\n    const cartElement = xmlDoc.getElementsByTagName(\"Cart\")[0];\r\n    cartElement.appendChild(newCartItem);\r\n\r\n    const serializer = new XMLSerializer();\r\n    const updatedXML = serializer.serializeToString(xmlDoc);\r\n    localStorage.setItem('userSession', updatedXML);\r\n    alert('Artículo agregado al carrito con éxito.');\r\n    console.log(localStorage.getItem('userSession'));\r\n}\r\n\r\nexport const removeFromCart = (itemId) => {\r\n    const userSessionXML = localStorage.getItem('userSession');\r\n    if (userSessionXML) {\r\n        const parser = new DOMParser();\r\n        const xmlDoc = parser.parseFromString(userSessionXML, 'text/xml');\r\n        const cartElement = xmlDoc.getElementsByTagName('Cart')[0];\r\n        if (cartElement) {\r\n            const items = cartElement.getElementsByTagName('Item');\r\n            for (let i = 0; i < items.length; i++) {\r\n                const idElement = items[i].getElementsByTagName('ID')[0];\r\n                if (idElement && idElement.textContent === String(itemId)) {\r\n                    cartElement.removeChild(items[i]);\r\n                    break;\r\n                }\r\n            }\r\n            const serializer = new XMLSerializer();\r\n            const updatedXML = serializer.serializeToString(xmlDoc);\r\n            localStorage.setItem('userSession', updatedXML);\r\n        }\r\n    }\r\n}\r\n\r\nexport const isCreated = () => {\r\n    const userSessionXML = localStorage.getItem('userSession');\r\n    return !!userSessionXML; \r\n}\r\n\r\nexport const getUser = () => {\r\n    const userSessionXML = localStorage.getItem('userSession');\r\n    if (userSessionXML) {\r\n      const parser = new DOMParser();\r\n      const xmlDoc = parser.parseFromString(userSessionXML, \"text/xml\");\r\n      const userElement = xmlDoc.getElementsByTagName(\"User\")[0];\r\n\r\n      if (userElement) {\r\n        const userEmail = userElement.getElementsByTagName(\"Email\")[0].textContent;\r\n        return userEmail\r\n      }\r\n    } else {\r\n        return null\r\n    } \r\n}\r\n\r\nexport const eliminateXML = () => {\r\n    localStorage.removeItem('userSession');\r\n    alert('Sesión cerrada.');\r\n}"],"mappings":"AAAA,OAAO,MAAMA,WAAW,GAAIC,IAAI,IAAK;EACjC,OAAO;AACX;AACA;AACA,qBAAqBA,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,CAAC;AAED,OAAO,MAAMC,SAAS,GAAIC,IAAI,IAAK;EAC/B,MAAMC,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EAC1D,MAAMC,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;EAC9B,MAAMC,MAAM,GAAGF,MAAM,CAACG,eAAe,CAACN,cAAc,EAAE,UAAU,CAAC;EAEjE,MAAMO,WAAW,GAAGF,MAAM,CAACG,aAAa,CAAC,MAAM,CAAC;EAChDD,WAAW,CAACE,YAAY,CAAC,IAAI,EAAEV,IAAI,CAAC;EACpC,MAAMW,aAAa,GAAGL,MAAM,CAACG,aAAa,CAAC,IAAI,CAAC;EAChDE,aAAa,CAACC,WAAW,GAAGZ,IAAI;EAChC,MAAMa,eAAe,GAAGP,MAAM,CAACG,aAAa,CAAC,UAAU,CAAC;EACxDI,eAAe,CAACD,WAAW,GAAG,CAAC;EAE/BJ,WAAW,CAACM,WAAW,CAACH,aAAa,CAAC;EACtCH,WAAW,CAACM,WAAW,CAACD,eAAe,CAAC;EAExC,MAAME,WAAW,GAAGT,MAAM,CAACU,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;EAC1DD,WAAW,CAACD,WAAW,CAACN,WAAW,CAAC;EAEpC,MAAMS,UAAU,GAAG,IAAIC,aAAa,CAAC,CAAC;EACtC,MAAMC,UAAU,GAAGF,UAAU,CAACG,iBAAiB,CAACd,MAAM,CAAC;EACvDJ,YAAY,CAACmB,OAAO,CAAC,aAAa,EAAEF,UAAU,CAAC;EAC/CG,KAAK,CAAC,yCAAyC,CAAC;EAChDC,OAAO,CAACC,GAAG,CAACtB,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC;AACpD,CAAC;AAED,OAAO,MAAMsB,cAAc,GAAIC,MAAM,IAAK;EACtC,MAAMzB,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EAC1D,IAAIF,cAAc,EAAE;IAChB,MAAMG,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;IAC9B,MAAMC,MAAM,GAAGF,MAAM,CAACG,eAAe,CAACN,cAAc,EAAE,UAAU,CAAC;IACjE,MAAMc,WAAW,GAAGT,MAAM,CAACU,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAC1D,IAAID,WAAW,EAAE;MACb,MAAMY,KAAK,GAAGZ,WAAW,CAACC,oBAAoB,CAAC,MAAM,CAAC;MACtD,KAAK,IAAIY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,KAAK,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;QACnC,MAAME,SAAS,GAAGH,KAAK,CAACC,CAAC,CAAC,CAACZ,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACxD,IAAIc,SAAS,IAAIA,SAAS,CAAClB,WAAW,KAAKmB,MAAM,CAACL,MAAM,CAAC,EAAE;UACvDX,WAAW,CAACiB,WAAW,CAACL,KAAK,CAACC,CAAC,CAAC,CAAC;UACjC;QACJ;MACJ;MACA,MAAMX,UAAU,GAAG,IAAIC,aAAa,CAAC,CAAC;MACtC,MAAMC,UAAU,GAAGF,UAAU,CAACG,iBAAiB,CAACd,MAAM,CAAC;MACvDJ,YAAY,CAACmB,OAAO,CAAC,aAAa,EAAEF,UAAU,CAAC;IACnD;EACJ;AACJ,CAAC;AAED,OAAO,MAAMc,SAAS,GAAGA,CAAA,KAAM;EAC3B,MAAMhC,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EAC1D,OAAO,CAAC,CAACF,cAAc;AAC3B,CAAC;AAED,OAAO,MAAMiC,OAAO,GAAGA,CAAA,KAAM;EACzB,MAAMjC,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EAC1D,IAAIF,cAAc,EAAE;IAClB,MAAMG,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;IAC9B,MAAMC,MAAM,GAAGF,MAAM,CAACG,eAAe,CAACN,cAAc,EAAE,UAAU,CAAC;IACjE,MAAMkC,WAAW,GAAG7B,MAAM,CAACU,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAE1D,IAAImB,WAAW,EAAE;MACf,MAAMC,SAAS,GAAGD,WAAW,CAACnB,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAACJ,WAAW;MAC1E,OAAOwB,SAAS;IAClB;EACF,CAAC,MAAM;IACH,OAAO,IAAI;EACf;AACJ,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAC9BnC,YAAY,CAACoC,UAAU,CAAC,aAAa,CAAC;EACtChB,KAAK,CAAC,iBAAiB,CAAC;AAC5B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}